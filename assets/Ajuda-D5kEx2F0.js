import{u as h,r as b,j as e,B as t,b as o,M as j,t as g}from"./index-DwnMLDmv.js";import{C as f,a as N,b as k,d as v,c as C}from"./Card-DJu3BItJ.js";import{u as w}from"./index.esm-YhzLcha3.js";import{P as A}from"./plus-BTRbMjF8.js";import{T}from"./ticket-CTQTMuqf.js";function E(){const{tickets:c,addTicket:n,currentUser:l}=h(),[i,a]=b.useState(!1),{register:r,handleSubmit:x,reset:m}=w(),d=c.filter(s=>s.author===l),u=s=>{n({...s,category:s.category||"Geral"}),g.success("Ticket criado com sucesso!",{description:"Em breve entraremos em contato."}),m(),a(!1)},p={Novo:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400","Em Atendimento":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",Concluído:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"},y={Baixa:"text-green-600 dark:text-green-400",Média:"text-orange-500 dark:text-orange-400",Alta:"text-red-600 dark:text-red-400"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight dark:text-white",children:"Central de Ajuda"}),e.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"Gerencie seus chamados e solicitações de suporte."})]}),e.jsxs(t,{onClick:()=>a(!0),children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Novo Ticket"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.length===0?e.jsxs("div",{className:"col-span-full py-12 text-center border-2 border-dashed border-secondary-200 rounded-lg dark:border-secondary-800",children:[e.jsx(T,{className:"mx-auto h-12 w-12 text-secondary-300"}),e.jsx("h3",{className:"mt-2 text-sm font-semibold text-secondary-900 dark:text-secondary-100",children:"Nenhum ticket"}),e.jsx("p",{className:"mt-1 text-sm text-secondary-500",children:"Comece criando uma nova solicitação."})]}):d.map(s=>e.jsxs(f,{className:"hover:shadow-md transition-shadow dark:bg-secondary-900",children:[e.jsxs(N,{className:"pb-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:o("px-2.5 py-0.5 rounded-full text-xs font-medium",p[s.status]),children:s.status}),e.jsx("span",{className:o("text-xs font-bold uppercase",y[s.urgency]),children:s.urgency})]}),e.jsx(k,{className:"text-lg leading-tight",children:s.category}),e.jsxs(v,{className:"text-xs mt-1",children:["Criado em ",new Date(s.createdAt).toLocaleDateString()]})]}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-300 line-clamp-3 break-words",children:s.description}),s.response&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-secondary-100 dark:border-secondary-800",children:[e.jsx("p",{className:"text-xs font-bold text-secondary-500 uppercase mb-1",children:"Resposta do Admin"}),e.jsx("p",{className:"text-sm text-secondary-700 dark:text-secondary-300 bg-secondary-50 dark:bg-secondary-900 p-2 rounded border border-secondary-200 dark:border-secondary-800",children:s.response})]})]})]},s.id))}),e.jsx(j,{isOpen:i,onClose:()=>a(!1),title:"Novo Ticket de Suporte",children:e.jsxs("form",{onSubmit:x(u),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium dark:text-secondary-200",children:"Categoria"}),e.jsxs("select",{...r("category"),className:"w-full rounded-md border border-secondary-300 bg-white px-3 py-2 text-sm dark:bg-secondary-950 dark:border-secondary-700 dark:text-secondary-200 focus:outline-none focus:ring-2 focus:ring-primary-600",children:[e.jsx("option",{value:"Infraestrutura",children:"Infraestrutura"}),e.jsx("option",{value:"Material",children:"Solicitação de Material"}),e.jsx("option",{value:"Dúvida Acadêmica",children:"Dúvida Acadêmica"}),e.jsx("option",{value:"Burocracia",children:"Burocracia"}),e.jsx("option",{value:"Outros",children:"Outros"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium dark:text-secondary-200",children:"Urgência"}),e.jsx("div",{className:"flex space-x-4",children:["Baixa","Média","Alta"].map(s=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:s,...r("urgency"),defaultChecked:s==="Baixa",className:"text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm dark:text-secondary-300",children:s})]},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium dark:text-secondary-200",children:"Descrição"}),e.jsx("textarea",{...r("description",{required:!0}),rows:4,className:"w-full rounded-md border border-secondary-300 bg-white px-3 py-2 text-sm resize-none dark:bg-secondary-950 dark:border-secondary-700 dark:text-secondary-200 focus:outline-none focus:ring-2 focus:ring-primary-600",placeholder:"Descreva sua solicitação com detalhes..."})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(t,{variant:"outline",type:"button",onClick:()=>a(!1),children:"Cancelar"}),e.jsx(t,{type:"submit",children:"Abrir Ticket"})]})]})})]})}export{E as default};
