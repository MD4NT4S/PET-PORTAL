import{c as E,u as P,r as T,j as e,H as S}from"./index-tuOnknx7.js";import{C as m,c as u,a as b,b as j,d as v}from"./Card-CbocT5rw.js";import{U as F}from"./users-Dun_JDaQ.js";const $=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],p=E("activity",$);function z(){const{evaluations:f}=P(),t=T.useMemo(()=>{const a=new Date,r=f.filter(s=>{const l=new Date(s.createdAt);return l.getMonth()===a.getMonth()&&l.getFullYear()===a.getFullYear()});if(r.length===0)return null;const d=r.reduce((s,l)=>s+l.presence,0),N=r.reduce((s,l)=>s+l.effort,0),w=r.reduce((s,l)=>s+l.mood,0),o=r.length,g=d/o,k=N/o,i=w/o,M=[{key:"satisfactionGroup",label:"Satisfação com Grupo",source:"criteria"},{key:"satisfactionTutor",label:"Satisfação com Tutoria",source:"criteria"},{key:"satisfactionCoordination",label:"Satisfação com Coordenadoria",source:"criteria"},{key:"satisfactionBalance",label:"Equilíbrio (PET x Faculdade)",source:"criteria"},{key:"effort",label:"Nível de Empenho",source:"root"}].map(s=>{const l=r.reduce((C,h)=>{let x=0;return s.source==="criteria"?x=h.criteria?.[s.key]||0:x=h[s.key]||0,C+x},0);return{name:s.label,value:(l/o).toFixed(1)}});let c="",n="";return i<=4?(c="PETdrástico",n="text-red-600 bg-red-100 dark:bg-red-900/20"):i<=6?(c="PETsado",n="text-orange-600 bg-orange-100 dark:bg-orange-900/20"):i<=8?(c="PETfeito",n="text-green-600 bg-green-100 dark:bg-green-900/20"):(c="ImPETcável",n="text-blue-600 bg-blue-100 dark:bg-blue-900/20"),{avgPresence:g,avgPresencePct:(g*10).toFixed(0),avgEffort:k.toFixed(1),avgMood:i.toFixed(1),climateLabel:c,climateColor:n,satisfaction:M,count:o}},[f]);if(!t)return e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center space-y-4",children:[e.jsx(p,{className:"h-16 w-16 text-secondary-200"}),e.jsx("h2",{className:"text-xl font-semibold text-secondary-700",children:"Sem dados neste mês"}),e.jsx("p",{className:"text-secondary-500 max-w-md",children:"Ainda não há autoavaliações registradas para o mês atual. Realize sua autoavaliação para visualizar as métricas do grupo."})]});const y=[{label:"Participação (Mês)",value:t.count,icon:F,color:"text-blue-600"},{label:"Taxa de Presença",value:`${t.avgPresencePct}%`,icon:p,color:"text-green-600"},{label:"Média de Sentimento",value:t.avgMood,icon:S,color:t.climateColor.split(" ")[0],bg:t.climateColor}];return e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transparência & Métricas"}),e.jsx("p",{className:"text-secondary-500 text-lg",children:"Visão geral do engajamento e clima do grupo (Mês Atual)."})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:y.map((a,r)=>{const d=a.icon;return e.jsx(m,{children:e.jsxs(u,{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-500",children:a.label}),e.jsx("p",{className:`text-2xl font-bold mt-1 ${a.bg?"text-sm":""}`,children:a.value})]}),e.jsx("div",{className:`p-3 rounded-full bg-secondary-50 dark:bg-secondary-800 ${a.color}`,children:e.jsx(d,{className:"h-6 w-6"})})]})},r)})}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(m,{className:"col-span-1",children:[e.jsxs(b,{children:[e.jsx(j,{children:"Termômetro do Grupo"}),e.jsx(v,{children:"Média do Sentimento (0-10)"})]}),e.jsx(u,{className:"flex flex-col items-center justify-center py-8",children:e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsxs("div",{className:"flex justify-between text-xs text-secondary-400 mb-2 font-medium",children:[e.jsx("span",{children:"Crítico"}),e.jsx("span",{children:"Neutro"}),e.jsx("span",{children:"Bom"}),e.jsx("span",{children:"Excelente"})]}),e.jsxs("div",{className:"h-4 w-full bg-secondary-100 rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"w-[40%] bg-red-400 h-full"}),e.jsx("div",{className:"w-[20%] bg-orange-400 h-full"}),e.jsx("div",{className:"w-[20%] bg-green-400 h-full"}),e.jsx("div",{className:"w-[20%] bg-blue-500 h-full"})]}),e.jsxs("div",{className:"absolute top-6 w-full text-center transition-all duration-700",children:[e.jsx("div",{className:"w-1 h-3 bg-black dark:bg-white mx-auto mb-1 animate-bounce",style:{marginLeft:`${Number(t.avgMood)*10}%`}}),e.jsx("span",{className:`text-xl font-bold ${t.climateColor.split(" ")[0]}`,children:t.climateLabel})]})]})})]}),e.jsxs(m,{className:"col-span-1",children:[e.jsxs(b,{children:[e.jsx(j,{children:"Níveis de Satisfação"}),e.jsx(v,{children:"Média das autoavaliações do grupo"})]}),e.jsx(u,{className:"space-y-5",children:t.satisfaction.map(a=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300",children:a.name}),e.jsx("span",{className:"text-sm font-bold text-secondary-900 dark:text-secondary-100",children:a.value})]}),e.jsx("div",{className:"w-full bg-secondary-100 rounded-full h-2.5 dark:bg-secondary-800",children:e.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full transition-all duration-1000",style:{width:`${Number(a.value)*10}%`}})})]},a.name))})]})]})]})}export{z as default};
