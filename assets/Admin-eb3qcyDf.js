import{c as v,u as je,r as i,j as e,I as c,B as h,t as u,e as $s,R as zs,f as Hs,T as q,P as Os,s as qs,M as ue,X as Us}from"./index-tuOnknx7.js";import{C as k,a as C,b as A,d as E,c as w}from"./Card-CbocT5rw.js";import{L as Fs}from"./lock-COFPjx10.js";import{U as Vs}from"./users-Dun_JDaQ.js";import{D as Bs}from"./download-RYUbeESQ.js";import{P as ge}from"./plus-CQqov7lp.js";import{S as Gs}from"./shield-alert-D39ZnXQe.js";const Ks=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Qs=v("bold",Ks);const Ws=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],es=v("check",Ws);const Js=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Xs=v("globe",Js);const Ys=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Zs=v("italic",Ys);const ea=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],sa=v("layout-template",ea);const aa=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],ta=v("list-ordered",aa);const ra=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],na=v("list",ra);const oa=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],ss=v("megaphone",oa);const ia=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],as=v("panels-top-left",ia);const da=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],be=v("pencil",da);const la=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ca=v("rotate-ccw",la);const ma=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],xa=v("save",ma);const ha=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],pa=v("share-2",ha);const ua=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],ts=v("table",ua);const ga=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],ns=v("type",ga);const ba=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],ja=v("underline",ba);function ya(){const{loginUser:a}=je(),[n,t]=i.useState(""),[d,l]=i.useState(!1),g=f=>{f.preventDefault(),a("admin",n,!0)?u.success("Login realizado com sucesso!"):(l(!0),u.error("Senha incorreta."))};return e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsxs(k,{className:"w-full max-w-md",children:[e.jsxs(C,{className:"text-center",children:[e.jsx("div",{className:"mx-auto bg-secondary-100 dark:bg-secondary-800 p-3 rounded-full w-fit mb-4",children:e.jsx(Fs,{className:"h-8 w-8 text-primary-600"})}),e.jsx(A,{children:"Acesso Restrito"}),e.jsx(E,{children:"Esta área é exclusiva para administradores."})]}),e.jsx(w,{children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx(c,{label:"Senha de Acesso",type:"password",placeholder:"••••••••",value:n,onChange:f=>{t(f.target.value),l(!1)},error:d?"Senha incorreta":void 0}),e.jsx(h,{type:"submit",className:"w-full",children:"Entrar"})]})})]})})}function rs({value:a,onChange:n,placeholder:t}){const d=i.useRef(null),[l,g]=i.useState(!1);i.useEffect(()=>{if(d.current&&d.current.innerHTML!==a){if(a===""&&d.current.innerHTML==="<br>")return;d.current.innerHTML=a}},[]);const f=y=>{const r=y.currentTarget.innerHTML;n(r)},p=(y,r=void 0)=>{document.execCommand(y,!1,r),d.current&&(n(d.current.innerHTML),d.current.focus())};return e.jsxs("div",{className:"border border-secondary-300 dark:border-secondary-700 rounded-md overflow-hidden bg-white dark:bg-secondary-950 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-1 p-2 bg-secondary-50 dark:bg-secondary-900 border-b border-secondary-200 dark:border-secondary-800",children:[e.jsx($,{onClick:()=>p("bold"),icon:e.jsx(Qs,{className:"w-4 h-4"}),title:"Negrito"}),e.jsx($,{onClick:()=>p("italic"),icon:e.jsx(Zs,{className:"w-4 h-4"}),title:"Itálico"}),e.jsx($,{onClick:()=>p("underline"),icon:e.jsx(ja,{className:"w-4 h-4"}),title:"Sublinhado"}),e.jsx("div",{className:"w-px h-4 bg-secondary-300 dark:bg-secondary-700 mx-1"}),e.jsx($,{onClick:()=>p("insertUnorderedList"),icon:e.jsx(na,{className:"w-4 h-4"}),title:"Lista com Marcadores"}),e.jsx($,{onClick:()=>p("insertOrderedList"),icon:e.jsx(ta,{className:"w-4 h-4"}),title:"Lista Numerada"}),e.jsx("div",{className:"w-px h-4 bg-secondary-300 dark:bg-secondary-700 mx-1"}),e.jsx($,{onClick:()=>p("formatBlock","h3"),icon:e.jsx(ns,{className:"w-4 h-4"}),title:"Título (H3)"}),e.jsx($,{onClick:()=>p("removeFormat"),icon:e.jsx(ca,{className:"w-4 h-4"}),title:"Limpar Formatação"})]}),e.jsx("div",{ref:d,contentEditable:!0,onInput:f,className:"p-3 min-h-[150px] focus:outline-none text-sm prose dark:prose-invert max-w-none","data-placeholder":t}),e.jsx("style",{children:`
                [contenteditable]:empty:before {
                    content: attr(data-placeholder);
                    color: #9ca3af;
                }
            `})]})}function $({onClick:a,icon:n,title:t}){return e.jsx("button",{type:"button",onClick:d=>{d.preventDefault(),a()},className:"p-1.5 rounded hover:bg-secondary-200 dark:hover:bg-secondary-800 text-secondary-700 dark:text-secondary-300 transition-colors",title:t,children:n})}function va(){const{siteConfig:a,updateSiteConfig:n}=je(),[t,d]=i.useState(a),[l,g]=i.useState("hero");i.useEffect(()=>{d(a)},[a]);const f=r=>{r.preventDefault(),n(t),u.success("Configurações do site atualizadas com sucesso!")},p=(r,M,T)=>{d(_=>({..._,[r]:{..._[r],[M]:T}}))},y=(r,M,T)=>{d(_=>({..._,pillars:{..._.pillars,[r]:{..._.pillars[r],[M]:T}}}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx(k,{className:"md:w-64 h-fit",children:e.jsx(w,{className:"p-2",children:e.jsx("nav",{className:"space-y-1",children:[{id:"hero",label:"Principal (Hero)",icon:as},{id:"pillars",label:"Pilares",icon:ns},{id:"contact",label:"Contatos & Social",icon:pa},{id:"dashboard",label:"Dashboard / Calendário",icon:as},{id:"footer",label:"Rodapé",icon:Xs}].map(r=>e.jsxs("button",{onClick:()=>g(r.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${l===r.id?"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400":"text-secondary-600 hover:bg-secondary-100 dark:text-secondary-400 dark:hover:bg-secondary-800"}`,children:[e.jsx(r.icon,{className:"mr-3 h-4 w-4"}),r.label]},r.id))})})}),e.jsxs(k,{className:"flex-1",children:[e.jsxs(C,{children:[e.jsxs(A,{children:[l==="hero"&&"Editar Seção Principal",l==="pillars"&&"Editar Pilares",l==="contact"&&"Editar Contatos e Redes Sociais",l==="dashboard"&&"Editar Dashboard e Calendário",l==="footer"&&"Editar Rodapé"]}),e.jsx(E,{children:"Faça alterações no conteúdo visível do site."})]}),e.jsx(w,{children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[l==="hero"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-left-4 duration-300",children:[e.jsx(c,{label:"Título Principal",value:t.heroTitle,onChange:r=>d({...t,heroTitle:r.target.value}),placeholder:"Ex: Bem-vindo ao PET Hub"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Descrição"}),e.jsx(rs,{value:t.heroDescription,onChange:r=>d({...t,heroDescription:r}),placeholder:"Breve descrição do grupo..."})]})]}),l==="pillars"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-left-4 duration-300",children:[e.jsxs("div",{className:"p-4 border rounded-lg border-blue-200 bg-blue-50/50 dark:border-blue-900/30 dark:bg-blue-900/10",children:[e.jsxs("h4",{className:"font-semibold text-blue-700 dark:text-blue-400 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500 mr-2"}),"Ensino"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{label:"Título do Pilar",value:t.pillars.teaching.title,onChange:r=>y("teaching","title",r.target.value)}),e.jsx(c,{label:"Descrição Curta",value:t.pillars.teaching.description,onChange:r=>y("teaching","description",r.target.value)})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg border-purple-200 bg-purple-50/50 dark:border-purple-900/30 dark:bg-purple-900/10",children:[e.jsxs("h4",{className:"font-semibold text-purple-700 dark:text-purple-400 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500 mr-2"}),"Pesquisa"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{label:"Título do Pilar",value:t.pillars.research.title,onChange:r=>y("research","title",r.target.value)}),e.jsx(c,{label:"Descrição Curta",value:t.pillars.research.description,onChange:r=>y("research","description",r.target.value)})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg border-green-200 bg-green-50/50 dark:border-green-900/30 dark:bg-green-900/10",children:[e.jsxs("h4",{className:"font-semibold text-green-700 dark:text-green-400 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 mr-2"}),"Extensão"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{label:"Título do Pilar",value:t.pillars.extension.title,onChange:r=>y("extension","title",r.target.value)}),e.jsx(c,{label:"Descrição Curta",value:t.pillars.extension.description,onChange:r=>y("extension","description",r.target.value)})]})]})]}),l==="contact"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-left-4 duration-300",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(c,{label:"Email de Contato",value:t.contact.email,onChange:r=>p("contact","email",r.target.value),placeholder:"contato@exemplo.com"}),e.jsx(c,{label:"Telefone (Opcional)",value:t.contact.phone||"",onChange:r=>p("contact","phone",r.target.value),placeholder:"(00) 0000-0000"})]}),e.jsx(c,{label:"Endereço (Opcional)",value:t.contact.address||"",onChange:r=>p("contact","address",r.target.value),placeholder:"Sala 123, Bloco A..."}),e.jsx("hr",{className:"border-secondary-200 dark:border-secondary-800"}),e.jsx("h4",{className:"font-medium",children:"Redes Sociais"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(c,{label:"Instagram",value:t.contact.instagram||"",onChange:r=>p("contact","instagram",r.target.value),placeholder:"@usuario"}),e.jsx(c,{label:"LinkedIn",value:t.contact.linkedin||"",onChange:r=>p("contact","linkedin",r.target.value),placeholder:"company/usuario"}),e.jsx(c,{label:"GitHub",value:t.contact.github||"",onChange:r=>p("contact","github",r.target.value),placeholder:"usuario"})]})]}),l==="footer"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-left-4 duration-300",children:[e.jsx(c,{label:"Texto do Rodapé (Fixo)",value:"Desenvolvido com carinho pelo Ex Petiano DANTAS.",disabled:!0,placeholder:"Mensagem fixa"}),e.jsx(c,{label:"Copyright (Opcional)",value:t.footer.copyright||"",onChange:r=>p("footer","copyright",r.target.value),placeholder:"© 2024 Todos os direitos reservados"}),e.jsx(c,{label:"Versão do Sistema",value:t.footer.version||"",onChange:r=>p("footer","version",r.target.value),placeholder:"v1.0.0"})]}),l==="dashboard"&&e.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-left-4 duration-300",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Foco do Ciclo"}),e.jsx("div",{className:"text-xs text-secondary-500 mb-1",children:"Mensagem exibida na barra lateral do calendário e dashboard."}),e.jsx(rs,{value:t.cycleFocus||"",onChange:r=>d({...t,cycleFocus:r}),placeholder:"Este mês estamos focados em..."})]})}),e.jsx("div",{className:"pt-4 flex justify-end gap-2",children:e.jsxs(h,{type:"submit",className:"w-full md:w-auto",children:[e.jsx(xa,{className:"mr-2 h-4 w-4"}),"Salvar Alterações"]})})]})})]})]})})}class B{constructor(n=0,t="Network Error"){this.status=n,this.text=t}}const fa=()=>{if(!(typeof localStorage>"u"))return{get:a=>Promise.resolve(localStorage.getItem(a)),set:(a,n)=>Promise.resolve(localStorage.setItem(a,n)),remove:a=>Promise.resolve(localStorage.removeItem(a))}},j={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:fa()},ye=a=>a?typeof a=="string"?{publicKey:a}:a.toString()==="[object Object]"?a:{}:{},Na=(a,n="https://api.emailjs.com")=>{if(!a)return;const t=ye(a);j.publicKey=t.publicKey,j.blockHeadless=t.blockHeadless,j.storageProvider=t.storageProvider,j.blockList=t.blockList,j.limitRate=t.limitRate,j.origin=t.origin||n},os=async(a,n,t={})=>{const d=await fetch(j.origin+a,{method:"POST",headers:t,body:n}),l=await d.text(),g=new B(d.status,l);if(d.ok)return g;throw g},is=(a,n,t)=>{if(!a||typeof a!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!n||typeof n!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},ka=a=>{if(a&&a.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},ds=a=>a.webdriver||!a.languages||a.languages.length===0,ls=()=>new B(451,"Unavailable For Headless Browser"),wa=(a,n)=>{if(!Array.isArray(a))throw"The BlockList list has to be an array";if(typeof n!="string")throw"The BlockList watchVariable has to be a string"},Sa=a=>!a.list?.length||!a.watchVariable,Ca=(a,n)=>a instanceof FormData?a.get(n):a[n],cs=(a,n)=>{if(Sa(a))return!1;wa(a.list,a.watchVariable);const t=Ca(n,a.watchVariable);return typeof t!="string"?!1:a.list.includes(t)},ms=()=>new B(403,"Forbidden"),Aa=(a,n)=>{if(typeof a!="number"||a<0)throw"The LimitRate throttle has to be a positive number";if(n&&typeof n!="string")throw"The LimitRate ID has to be a non-empty string"},Ea=async(a,n,t)=>{const d=Number(await t.get(a)||0);return n-Date.now()+d},xs=async(a,n,t)=>{if(!n.throttle||!t)return!1;Aa(n.throttle,n.id);const d=n.id||a;return await Ea(d,n.throttle,t)>0?!0:(await t.set(d,Date.now().toString()),!1)},hs=()=>new B(429,"Too Many Requests"),Ta=async(a,n,t,d)=>{const l=ye(d),g=l.publicKey||j.publicKey,f=l.blockHeadless||j.blockHeadless,p=l.storageProvider||j.storageProvider,y={...j.blockList,...l.blockList},r={...j.limitRate,...l.limitRate};return f&&ds(navigator)?Promise.reject(ls()):(is(g,a,n),ka(t),t&&cs(y,t)?Promise.reject(ms()):await xs(location.pathname,r,p)?Promise.reject(hs()):os("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:g,service_id:a,template_id:n,template_params:t}),{"Content-type":"application/json"}))},Ma=a=>{if(!a||a.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Da=a=>typeof a=="string"?document.querySelector(a):a,_a=async(a,n,t,d)=>{const l=ye(d),g=l.publicKey||j.publicKey,f=l.blockHeadless||j.blockHeadless,p=j.storageProvider||l.storageProvider,y={...j.blockList,...l.blockList},r={...j.limitRate,...l.limitRate};if(f&&ds(navigator))return Promise.reject(ls());const M=Da(t);is(g,a,n),Ma(M);const T=new FormData(M);return cs(y,T)?Promise.reject(ms()):await xs(location.pathname,r,p)?Promise.reject(hs()):(T.append("lib_version","4.4.1"),T.append("service_id",a),T.append("template_id",n),T.append("user_id",g),os("/api/v1.0/email/send-form",T))},Pa={init:Na,send:Ta,sendForm:_a,EmailJSResponseStatus:B};function Ua(){const{tickets:a,evaluations:n,ombudsman:t,isAdmin:d,logoutUser:l,members:g,addMember:f,removeMember:p,updateMember:y,updateOmbudsmanStatus:r,removeOmbudsman:M,sectors:T,updateSector:_,updateSectorItems:ve,loans:U,updateTicket:ps,removeTicket:us,userRole:S,removeEvaluation:gs,approveLoanReturn:fe,notices:Ne,addNotice:bs,removeNotice:js,currentUser:Y}=je(),R=[{id:"ouvidoria",label:"Ouvidoria",roles:["admin_master","admin_gp"]},{id:"avaliacoes",label:"Autoavaliações",roles:["admin_master","admin_gp"]},{id:"tickets",label:"Tickets",roles:["admin_master","admin_gp","admin_infra"]},{id:"membros",label:"Membros",icon:Vs,roles:["admin_master","admin_gp"]},{id:"infraestrutura",label:"Infraestrutura",icon:$s,roles:["admin_master","admin_infra"]},{id:"cms",label:"Gerenciar Site",icon:sa,roles:["admin_master","admin_gp"]},{id:"avisos",label:"Avisos",icon:ss,roles:["admin_master","admin_gp","admin_secretaria","admin_divulgacao"]}].filter(s=>s.roles.includes(S||"")),[b,ke]=i.useState(R.length>0?R[0].id:"ouvidoria");zs.useEffect(()=>{R.length>0&&(R.find(x=>x.id===b)||ke(R[0].id))},[S,R]);const[Z,we]=i.useState(""),[ee,Se]=i.useState(""),[se,Ce]=i.useState(""),[ae,Ae]=i.useState(""),[te,Ee]=i.useState(""),[re,Te]=i.useState(""),[Me,De]=i.useState("admin_master"),[ne,G]=i.useState(null),[_e,Pe]=i.useState(""),[Re,Le]=i.useState(""),[Ie,$e]=i.useState(""),[N,z]=i.useState(null),[ze,He]=i.useState(""),[Oe,qe]=i.useState(""),[oe,ie]=i.useState(""),[Ue,de]=i.useState(""),[Fe,le]=i.useState(1),[Ve,ce]=i.useState("Disponível"),[K,Be]=i.useState(""),[Q,Ge]=i.useState(""),[H,W]=i.useState("info"),[L,F]=i.useState("members"),[O,Ke]=i.useState(null),[m,J]=i.useState(null),me=a.filter(s=>S==="admin_infra"?s.category==="Infraestrutura"||s.category==="Material":!0);if(!d)return e.jsx(ya,{});const ys=()=>{if(b==="cms"||b==="membros"||b==="infraestrutura")return;let s=[],x=[];if(b==="avaliacoes"?(s=["Data","Membro","Presença","Esforço","Humor","Sentimento","Melhoria","Sat. Grupo","Sat. Tutor","Sat. Coord","Sat. Peers","Sat. Equilíbrio","Dedicação Semanal","Cumprimento Metas","Produção Acadêmica","Desempenho Setor","Cuidado Sala","Destaque Positivo"],x=n.map(o=>[new Date(o.createdAt).toLocaleDateString(),o.author,o.presence.toString(),o.effort.toString(),o.mood.toString(),`"${o.feeling?.replace(/"/g,'""')||""}"`,`"${o.improvement?.replace(/"/g,'""')||""}"`,o.criteria?.satisfactionGroup?.toString()||"",o.criteria?.satisfactionTutor?.toString()||"",o.criteria?.satisfactionCoordination?.toString()||"",o.criteria?.peerEvaluations?(Object.values(o.criteria.peerEvaluations).reduce((Ze,V)=>Ze+V,0)/Object.values(o.criteria.peerEvaluations).length).toFixed(1):"",o.criteria?.satisfactionBalance?.toString()||"",`"${o.criteria?.weeklyDedication?.replace(/"/g,'""')||""}"`,`"${o.criteria?.goalCompliance?.replace(/"/g,'""')||""}"`,`"${o.criteria?.academicProduction?.replace(/"/g,'""')||""}"`,`"${o.criteria?.sectorPerformance?.replace(/"/g,'""')||""}"`,`"${o.criteria?.roomCare?.replace(/"/g,'""')||""}"`,`"${o.criteria?.positiveHighlight?.replace(/"/g,'""')||""}"`])):b==="ouvidoria"?(s=["Data","Tipo","Identificação","Status","Mensagem"],x=t.map(o=>[new Date(o.createdAt).toLocaleDateString(),o.type,o.isAnonymous?"Anônimo":o.identification||"Não informado",o.status||"Pendente",`"${o.text.replace(/"/g,'""')}"`])):b==="tickets"&&(s=["Data","Categoria","Urgência","Status","Solicitante","Descrição","Resposta"],x=me.map(o=>[new Date(o.createdAt).toLocaleDateString(),o.category,o.urgency,o.status,o.author||"Anônimo",`"${o.description.replace(/"/g,'""')}"`,`"${o.response?.replace(/"/g,'""')||""}"`])),x.length===0){u.error("Não há dados para exportar.");return}const xe="data:text/csv;charset=utf-8,"+"\uFEFF"+s.join(";")+`
`+x.map(o=>o.join(";")).join(`
`),he=encodeURI(xe),P=document.createElement("a");P.setAttribute("href",he),P.setAttribute("download",`relatorio_${b}_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(P),P.click(),document.body.removeChild(P),u.success("Relatório exportado com sucesso!")},vs=s=>{if(s.preventDefault(),!Z.trim()||!ee.trim()||!se.trim()){u.error("Preencha todos os campos.");return}f({name:Z.trim(),email:ee.trim(),password:se.trim(),role:"member"}),we(""),Se(""),Ce(""),u.success("Membro adicionado com sucesso!")},fs=(s,x)=>{confirm(`Tem certeza que deseja remover ${x}?`)&&(p(s),u.success("Membro removido."))},Ns=s=>{if(s.preventDefault(),!ae.trim()||!te.trim()||!re.trim()){u.error("Preencha todos os campos.");return}f({name:ae.trim(),email:te.trim(),password:re.trim(),role:Me}),Ae(""),Ee(""),Te(""),De("admin_master"),u.success("Administrador adicionado com sucesso!")},[I,ks]=i.useState(null),[Qe,We]=i.useState(""),[Je,Xe]=i.useState("Novo"),[ws,X]=i.useState(!1),Ss=s=>{ks(s),We(s.response||""),Xe(s.status==="Aberto"?"Novo":s.status==="Resolvido"?"Concluído":s.status),X(!0)},Cs=s=>{s.preventDefault(),I&&(ps(I.id,{status:Je,response:Qe}),X(!1),u.success("Ticket atualizado!"))},Ye=s=>{G(s),Pe(s.name),Le(s.email),$e(s.password||"")},As=s=>{s.preventDefault(),ne&&(y(ne.id,{name:_e,email:Re,password:Ie}),G(null),u.success("Membro atualizado com sucesso!"))},Es=s=>{r(s,"Atendido"),u.success("Solicitação marcada como atendida.")},Ts=s=>{confirm("Tem certeza que deseja excluir este registro?")&&(M(s),u.success("Registro excluído."))},Ms=s=>{z(s),He(s.name),qe(s.category),ie(""),de(""),le(1),ce("Disponível")},Ds=s=>{s.preventDefault(),N&&(_(N.id,{name:ze,category:Oe}),z(null),u.success("Setor atualizado!"))},_s=s=>{if(s.preventDefault(),!N||!oe.trim())return;const x={id:crypto.randomUUID(),name:oe.trim(),code:Ue.trim(),quantity:Fe,status:Ve},D=[...N.items,x];ve(N.id,D),z({...N,items:D}),ie(""),de(""),le(1),ce("Disponível")},Ps=s=>{if(!N)return;const x=N.items.filter(D=>D.id!==s);ve(N.id,x),z({...N,items:x}),z({...N,items:x})},Rs=async s=>{if(s.preventDefault(),!K.trim()||!Q.trim()){u.error("Preencha título e conteúdo.");return}bs({title:K,content:Q,type:H,author:Y||"Admin"});const D="service_2l3gg6y",xe="template_p0a3eqw",he="M8F4WkYu-RwFvtvcX";{u.info("Iniciando envio de emails...");const P=g.map(o=>o.email).filter(Boolean);console.log("Sending emails to:",P);try{const o=[...new Set(P)],V=g.find(pe=>pe.name===Y)?.email||o[0],Is=o.filter(pe=>pe!==V).join(",");await Pa.send(D,xe,{to_name:"Equipe PET",to_email:V||o[0],bcc:Is,title:K,message:Q,type:H==="info"?"Informativo":H==="alert"?"Alerta":"Evento",from_name:Y||"Admin"},he),console.log(`Email único enviado para ${V} com BCC para ${o.length-1} membros.`),u.success("Aviso enviado com sucesso!")}catch(o){console.error("Falha ao enviar e-mail:",o),u.error("Erro ao enviar aviso.")}}Be(""),Ge(""),W("info")},Ls=s=>{confirm("Tem certeza que deseja remover este aviso?")&&js(s)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Painel Administrativo"}),e.jsxs("p",{className:"text-secondary-500 dark:text-secondary-400",children:["Acesso restrito à gestão do grupo. ",e.jsxs("span",{className:"font-semibold text-primary-600",children:["(",S==="admin_master"?"Geral":S==="admin_infra"?"Infraestrutura":S==="admin_gp"?"Gestão de Pessoas":S==="admin_secretaria"?"Secretaria":S==="admin_divulgacao"?"Divulgação":"Admin",")"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[b!=="cms"&&b!=="membros"&&b!=="infraestrutura"&&e.jsxs(h,{onClick:ys,variant:"outline",children:[e.jsx(Bs,{className:"mr-2 h-4 w-4"}),"Exportar CSV"]}),e.jsxs(h,{onClick:l,variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/10",children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Sair"]})]})]}),e.jsx("div",{className:"flex space-x-2 border-b border-secondary-200 dark:border-secondary-800 pb-1 overflow-x-auto",children:R.map(s=>s.id==="admins"&&S!=="admin_master"?null:e.jsxs("button",{onClick:()=>ke(s.id),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap
              ${b===s.id?"bg-white border-x border-t border-secondary-200 text-primary-600 dark:bg-secondary-900 dark:border-secondary-800 dark:text-primary-400":"text-secondary-500 hover:text-secondary-700 hover:bg-secondary-50 dark:hover:bg-secondary-800"}`,children:[s.icon&&e.jsx(s.icon,{className:"h-4 w-4"}),s.label]},s.id))}),b==="membros"?e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(k,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Adicionar Membro"}),e.jsx(E,{children:"Cadastre um novo integrante do PET."})]}),e.jsx(w,{children:e.jsxs("form",{onSubmit:vs,className:"space-y-3",children:[e.jsx(c,{placeholder:"Nome Completo",value:Z,onChange:s=>we(s.target.value)}),e.jsx(c,{placeholder:"Email",type:"email",value:ee,onChange:s=>Se(s.target.value)}),e.jsx(c,{placeholder:"Senha Inicial",type:"text",value:se,onChange:s=>Ce(s.target.value)}),e.jsxs(h,{type:"submit",className:"w-full",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"})," Adicionar Membro"]})]})})]}),e.jsxs(k,{children:[e.jsxs(C,{children:[e.jsxs(A,{children:["Membros Ativos (",g.length,")"]}),e.jsx(E,{children:"Lista de integrantes cadastrados."})]}),e.jsx(w,{children:e.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:g.filter(s=>s.role==="member").length===0?e.jsx("p",{className:"text-secondary-500 text-sm",children:"Nenhum membro cadastrado."}):g.filter(s=>s.role==="member").map(s=>e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-secondary-50 dark:bg-secondary-900 border border-secondary-200 dark:border-secondary-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-secondary-500",children:s.email})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>Ye(s),className:"text-blue-500 hover:text-blue-700 hover:bg-blue-50",children:e.jsx(be,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>fs(s.id,s.name),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(q,{className:"h-4 w-4"})})]})]},s.id))})})]})]}):b==="admins"?e.jsx("div",{className:"space-y-6",children:e.jsxs(k,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Gerenciar Administradores"}),e.jsx(E,{children:"Visualize e edite as credenciais dos administradores do sistema."})]}),e.jsxs(w,{children:[e.jsxs("div",{className:"mb-6 p-4 bg-secondary-50 dark:bg-secondary-900/50 rounded-lg border border-secondary-200 dark:border-secondary-800",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Adicionar Novo Administrador"}),e.jsxs("form",{onSubmit:Ns,className:"grid md:grid-cols-2 lg:grid-cols-5 gap-3",children:[e.jsx(c,{placeholder:"Nome",value:ae,onChange:s=>Ae(s.target.value)}),e.jsx(c,{placeholder:"Email",type:"email",value:te,onChange:s=>Ee(s.target.value)}),e.jsx(c,{placeholder:"Senha",type:"text",value:re,onChange:s=>Te(s.target.value)}),e.jsxs("select",{value:Me,onChange:s=>De(s.target.value),className:"flex h-10 w-full rounded-md border border-secondary-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-secondary-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 disabled:cursor-not-allowed disabled:opacity-50 dark:border-secondary-800 dark:bg-secondary-950 dark:ring-offset-secondary-950 dark:placeholder:text-secondary-400",children:[e.jsx("option",{value:"admin_master",children:"Geral"}),e.jsx("option",{value:"admin_infra",children:"Infraestrutura"}),e.jsx("option",{value:"admin_gp",children:"Gestão de Pessoas"}),e.jsx("option",{value:"admin_secretaria",children:"Secretaria"}),e.jsx("option",{value:"admin_divulgacao",children:"Divulgação"})]}),e.jsxs(h,{type:"submit",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"})," Adicionar"]})]})]}),e.jsx("div",{className:"rounded-md border border-secondary-200 dark:border-secondary-800",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-secondary-700 uppercase bg-secondary-50 dark:bg-secondary-900 dark:text-secondary-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Nome"}),e.jsx("th",{className:"px-6 py-3",children:"Email"}),e.jsx("th",{className:"px-6 py-3",children:"Cargo"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Ações"})]})}),e.jsx("tbody",{children:g.filter(s=>s.role.startsWith("admin_")).map(s=>e.jsxs("tr",{className:"bg-white border-b dark:bg-secondary-950 dark:border-secondary-800 hover:bg-secondary-50 dark:hover:bg-secondary-900",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-secondary-900 dark:text-white",children:s.name}),e.jsx("td",{className:"px-6 py-4 text-secondary-500",children:s.email}),e.jsx("td",{className:"px-6 py-4 text-secondary-500",children:s.role==="admin_master"?"Geral":s.role==="admin_infra"?"Infraestrutura":s.role==="admin_gp"?"Gestão de Pessoas":s.role==="admin_secretaria"?"Secretaria":s.role==="admin_divulgacao"?"Divulgação":s.role}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>Ye(s),children:[e.jsx(be,{className:"h-4 w-4 mr-1"})," Editar"]})})]},s.id))})]})})]})]})}):b==="infraestrutura"?e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:T.map(s=>e.jsxs(k,{className:"hover:border-primary-500 transition-colors",children:[e.jsxs(C,{className:"pb-2",children:[e.jsxs(A,{className:"text-lg flex justify-between items-center",children:[s.name,e.jsx(h,{size:"icon",variant:"ghost",onClick:()=>Ms(s),children:e.jsx(be,{className:"h-4 w-4"})})]}),e.jsx(E,{children:s.category})]}),e.jsx(w,{children:e.jsxs("div",{className:"flex items-center text-secondary-500 text-sm",children:[e.jsx(Os,{className:"h-4 w-4 mr-2"}),s.items.length," itens cadastrados"]})})]},s.id))}),e.jsxs(k,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Histórico de Empréstimos"}),e.jsx(E,{children:"Registro de retiradas e devoluções de materiais."})]}),e.jsx(w,{children:e.jsx("div",{className:"rounded-md border border-secondary-200 dark:border-secondary-800 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-secondary-700 uppercase bg-secondary-50 dark:bg-secondary-900 dark:text-secondary-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Data"}),e.jsx("th",{className:"px-6 py-3",children:"Item"}),e.jsx("th",{className:"px-6 py-3",children:"Qtd"}),e.jsx("th",{className:"px-6 py-3",children:"Membro"}),e.jsx("th",{className:"px-6 py-3",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3",children:"Devolução"}),e.jsx("th",{className:"px-6 py-3",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-secondary-200 dark:divide-secondary-800",children:U.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-secondary-500",children:"Nenhum empréstimo registrado."})}):U.map(s=>e.jsxs("tr",{className:"bg-white dark:bg-secondary-950 hover:bg-secondary-50 dark:hover:bg-secondary-900",children:[e.jsx("td",{className:"px-6 py-4 font-medium whitespace-nowrap",children:new Date(s.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:s.itemName}),e.jsx("td",{className:"px-6 py-4",children:s.quantity||1}),e.jsx("td",{className:"px-6 py-4",children:s.userName}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-xs font-medium bg-primary-50 text-primary-700 px-2 py-0.5 rounded-full",children:s.type})}),e.jsx("td",{className:"px-6 py-4",children:s.type==="Empréstimo"&&s.expectedReturnDate?e.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-medium",children:new Date(s.expectedReturnDate).toLocaleDateString()}):e.jsx("span",{className:"text-secondary-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold
                                                            ${s.status==="Ativo"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":s.status==="Atrasado"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:s.status})})]},s.id))})]})})})]}),e.jsxs(k,{className:"border-t-4 border-t-yellow-500",children:[e.jsxs(C,{children:[e.jsxs(A,{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Aprovações Pendentes"}),e.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-semibold px-2.5 py-0.5 rounded dark:bg-yellow-200 dark:text-yellow-900",children:[U.filter(s=>s.status==="Aguardando Aprovação").length," pendentes"]})]}),e.jsx(E,{children:"Valide as devoluções de materiais."})]}),e.jsx(w,{children:e.jsx("div",{className:"space-y-4",children:U.filter(s=>s.status==="Aguardando Aprovação").length===0?e.jsx("p",{className:"text-secondary-500 text-center py-4",children:"Nenhuma devolução pendente de aprovação."}):U.filter(s=>s.status==="Aguardando Aprovação").map(s=>e.jsxs("div",{className:"bg-secondary-50 dark:bg-secondary-900 border border-secondary-200 dark:border-secondary-800 p-4 rounded-lg flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg",children:s.itemName}),e.jsxs("p",{className:"text-secondary-600 dark:text-secondary-400 text-sm",children:["Devolvido por: ",e.jsx("span",{className:"font-semibold",children:s.userName})]}),e.jsxs("p",{className:"text-secondary-500 text-xs mt-1",children:["Data Retirada: ",new Date(s.date).toLocaleDateString()]})]})}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[s.withdrawalPhotoUrl&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-medium text-secondary-500",children:"Retirada"}),e.jsx("a",{href:s.withdrawalPhotoUrl,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:s.withdrawalPhotoUrl,alt:"Retirada",className:"w-24 h-24 object-cover rounded border hover:scale-105 transition-transform"})})]}),s.returnPhotoUrl&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-medium text-secondary-500",children:"Devolução"}),e.jsx("a",{href:s.returnPhotoUrl,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:s.returnPhotoUrl,alt:"Devolução",className:"w-24 h-24 object-cover rounded border hover:scale-105 transition-transform"})})]})]})]}),e.jsxs("div",{className:"flex flex-col justify-center gap-2 min-w-[200px]",children:[e.jsxs(h,{className:"bg-green-600 hover:bg-green-700 text-white",onClick:async()=>{confirm("Confirmar que o item foi devolvido em boas condições?")&&(await fe(s.id,"ok"),u.success("Devolução aprovada!"))},children:[e.jsx(es,{className:"mr-2 h-4 w-4"})," Aprovar (OK)"]}),e.jsxs(h,{variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50 hover:text-red-700",onClick:async()=>{const x=prompt("Descreva o problema (ex: sujo, quebrado):");if(x){const D=confirm("O item está danificado?")?"damaged":"dirty";await fe(s.id,D,x),u.success("Problema reportado e devolução processada.")}},children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"})," Reportar Problema"]})]})]},s.id))})})]})]}):b==="cms"?e.jsx(va,{}):b==="avisos"?e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(k,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Novo Aviso"}),e.jsx(E,{children:"Poste um aviso no mural da Home. Se configurado, enviará email."})]}),e.jsx(w,{children:e.jsxs("form",{onSubmit:Rs,className:"space-y-4",children:[e.jsx(c,{placeholder:"Título do Aviso",value:K,onChange:s=>Be(s.target.value)}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1 block",children:"Tipo"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"noticeType",value:"info",checked:H==="info",onChange:()=>W("info"),className:"text-primary-600"}),"Informativo"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"noticeType",value:"alert",checked:H==="alert",onChange:()=>W("alert"),className:"text-red-600"}),"Alerta"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"noticeType",value:"event",checked:H==="event",onChange:()=>W("event"),className:"text-blue-600"}),"Evento"]})]})]}),e.jsx("div",{children:e.jsx("textarea",{className:"w-full min-h-[120px] rounded-md border border-secondary-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-secondary-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 disabled:cursor-not-allowed disabled:opacity-50 dark:border-secondary-800 dark:bg-secondary-950 dark:ring-offset-secondary-950 dark:placeholder:text-secondary-400",placeholder:"Conteúdo do aviso...",value:Q,onChange:s=>Ge(s.target.value)})}),e.jsxs(h,{type:"submit",className:"w-full",children:[e.jsx(ss,{className:"mr-2 h-4 w-4"})," Postar Aviso"]})]})})]}),e.jsxs(k,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Avisos Ativos"}),e.jsx(E,{children:"Gerencie os avisos visíveis no mural."})]}),e.jsx(w,{children:e.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto",children:Ne.length===0?e.jsx("p",{className:"text-secondary-500 text-center py-4",children:"Nenhum aviso ativo."}):Ne.map(s=>e.jsxs("div",{className:"p-4 rounded-lg bg-secondary-50 dark:bg-secondary-900 border border-secondary-200 dark:border-secondary-800 relative group",children:[e.jsx(h,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 text-secondary-400 hover:text-red-500 hover:bg-red-50",onClick:()=>Ls(s.id),children:e.jsx(q,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.type==="alert"&&e.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded-full font-bold",children:"Alerta"}),s.type==="event"&&e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded-full font-bold",children:"Evento"}),e.jsx("h4",{className:"font-semibold",children:s.title})]}),e.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-300 line-clamp-2",children:s.content}),e.jsxs("div",{className:"mt-2 flex justify-between text-xs text-secondary-400",children:[e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()}),e.jsxs("span",{children:["Por: ",s.author]})]})]},s.id))})})]})]}):b==="avaliacoes"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-secondary-500",children:[e.jsx("button",{onClick:()=>{F("members"),Ke(null),J(null)},className:`hover:text-primary-600 ${L==="members"?"font-bold text-primary-600":""}`,children:"Membros"}),L!=="members"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"/"}),e.jsx("button",{onClick:()=>{F("months"),J(null)},className:`hover:text-primary-600 ${L==="months"?"font-bold text-primary-600":""}`,children:O?.name})]}),L==="detail"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"/"}),e.jsx("span",{className:"font-bold text-primary-600",children:m?.criteria?.month||"Detalhes"})]})]}),(S==="admin_master"||S==="admin_gp")&&e.jsxs(h,{variant:"outline",size:"sm",className:"text-red-600 border-red-200 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:async()=>{if(confirm("ATENÇÃO: Isso apagará TODAS as autoavaliações do sistema. Tem certeza absoluta?")){const{error:s}=await qs.from("evaluations").delete().neq("id","00000000-0000-0000-0000-000000000000");s?u.error("Erro ao limpar dados."):(u.success("Todas as avaliações foram excluídas."),window.location.reload())}},children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Limpar Tudo"]})]}),L==="members"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Histórico de Avaliações"}),e.jsx("p",{className:"text-secondary-500 mb-6",children:"Selecione um PETiano para ver seu progresso."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:g.filter(s=>s.role==="member").map(s=>e.jsxs("button",{onClick:()=>{Ke(s),F("months")},className:"flex flex-col items-center justify-center p-6 bg-secondary-900/50 hover:bg-secondary-800 border border-secondary-800 rounded-xl transition-all hover:scale-105 group",children:[s.photoUrl?e.jsx("img",{src:s.photoUrl,alt:s.name,className:"h-16 w-16 rounded-full object-cover mb-3 border-2 border-orange-500 group-hover:border-orange-600"}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-orange-500 flex items-center justify-center text-2xl font-bold text-white mb-3 group-hover:bg-orange-600",children:s.name.charAt(0).toUpperCase()}),e.jsx("span",{className:"font-medium text-white text-center",children:s.name}),e.jsx("span",{className:"text-xs text-secondary-500 mt-1",children:"Ver avaliações"})]},s.id))})]}),L==="months"&&O&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-orange-500 flex items-center justify-center text-xl font-bold text-white",children:O.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:O.name}),e.jsx("p",{className:"text-secondary-500",children:"Selecione o mês para visualizar a autoavaliação."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[n.filter(s=>s.author===O.name).sort((s,x)=>new Date(x.createdAt).getTime()-new Date(s.createdAt).getTime()).map(s=>e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{onClick:()=>{J(s),F("detail")},className:"w-full p-6 bg-secondary-50 dark:bg-secondary-900 border border-secondary-200 dark:border-secondary-800 rounded-xl text-left hover:border-primary-500 transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-lg font-bold text-primary-600",children:s.criteria?.month||"Mês não informado"}),e.jsx("span",{className:"text-xs text-secondary-400",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-secondary-600 dark:text-secondary-300",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Presença:"}),e.jsx("span",{className:"font-bold",children:s.presence})]}),e.jsx("span",{className:"text-secondary-300",children:"|"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Humor:"}),e.jsx("span",{className:"font-bold",children:s.mood})]})]})]}),(S==="admin_master"||S==="admin_gp")&&e.jsx("button",{onClick:x=>{x.stopPropagation(),confirm("Tem certeza que deseja excluir esta avaliação?")&&(gs(s.id),m?.id===s.id&&(J(null),F("months")))},className:"absolute top-2 right-2 p-2 text-red-500 hover:text-red-700 bg-white/50 dark:bg-black/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Excluir Avaliação",children:e.jsx(q,{className:"h-4 w-4"})})]},s.id)),n.filter(s=>s.author===O.name).length===0&&e.jsx("div",{className:"col-span-full py-12 text-center text-secondary-500 italic bg-secondary-50 dark:bg-secondary-900/50 rounded-lg",children:"Nenhuma avaliação encontrada para este membro."})]})]}),L==="detail"&&m&&e.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:e.jsxs(k,{className:"border-l-4 border-l-primary-500",children:[e.jsxs(C,{children:[e.jsxs(A,{className:"flex justify-between",children:[e.jsxs("span",{children:["Autoavaliação de ",m.criteria?.month]}),e.jsxs("span",{className:"text-sm font-normal text-secondary-500",children:["Enviado em ",new Date(m.createdAt).toLocaleString()]})]}),e.jsxs(E,{children:["Membro: ",m.author]})]}),e.jsxs(w,{className:"grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-secondary-50 dark:bg-secondary-900 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-secondary-500 uppercase",children:"Presença"}),e.jsx("p",{className:"text-2xl font-bold",children:m.presence})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-secondary-500 uppercase",children:"Empenho"}),e.jsx("p",{className:"text-2xl font-bold",children:m.effort})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-secondary-500 uppercase",children:"Humor (0-10)"}),e.jsx("p",{className:"text-2xl font-bold",children:m.mood})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-secondary-500 uppercase",children:"Equilíbrio"}),e.jsx("p",{className:"text-2xl font-bold",children:m.criteria?.satisfactionBalance||"-"})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold border-b pb-1",children:"Desempenho & Metas"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Dedicação Semanal"}),e.jsx("p",{className:"p-2 bg-secondary-50 dark:bg-secondary-900 rounded text-sm mt-1",children:m.criteria?.weeklyDedication||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Cumprimento de Metas"}),e.jsx("p",{className:"p-2 bg-secondary-50 dark:bg-secondary-900 rounded text-sm mt-1",children:m.criteria?.goalCompliance||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Produção Acadêmica"}),e.jsx("p",{className:"p-2 bg-secondary-50 dark:bg-secondary-900 rounded text-sm mt-1",children:m.criteria?.academicProduction||"-"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold border-b pb-1",children:"Coordenadoria & Vivência"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Desempenho no Setor"}),e.jsx("p",{className:"p-2 bg-secondary-50 dark:bg-secondary-900 rounded text-sm mt-1",children:m.criteria?.sectorPerformance||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Zelo pela Sala"}),e.jsx("p",{className:"p-2 bg-secondary-50 dark:bg-secondary-900 rounded text-sm mt-1",children:m.criteria?.roomCare||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Relato de Experiência"}),e.jsxs("p",{className:"p-2 bg-secondary-50 dark:bg-secondary-900 rounded text-sm mt-1 italic",children:['"',m.feeling,'"']})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold border-b pb-1 mb-3",children:"Satisfações (0-10)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-3 border rounded-lg text-center",children:[e.jsx("span",{className:"block text-xs text-secondary-500",children:"Grupo"}),e.jsx("span",{className:"font-bold text-lg",children:m.criteria?.satisfactionGroup||"-"})]}),e.jsxs("div",{className:"p-3 border rounded-lg text-center",children:[e.jsx("span",{className:"block text-xs text-secondary-500",children:"Tutoria"}),e.jsx("span",{className:"font-bold text-lg",children:m.criteria?.satisfactionTutor||"-"})]}),e.jsxs("div",{className:"p-3 border rounded-lg text-center",children:[e.jsx("span",{className:"block text-xs text-secondary-500",children:"Coordenação"}),e.jsx("span",{className:"font-bold text-lg",children:m.criteria?.satisfactionCoordination||"-"})]}),e.jsxs("div",{className:"p-3 border rounded-lg text-center",children:[e.jsx("span",{className:"block text-xs text-secondary-500",children:"Relacionamento (Média)"}),e.jsx("span",{className:"font-bold text-lg",children:m.criteria?.peerEvaluations?(Object.values(m.criteria.peerEvaluations).reduce((s,x)=>s+x,0)/Object.values(m.criteria.peerEvaluations).length).toFixed(1):"-"})]}),e.jsxs("div",{className:"p-3 border rounded-lg text-center",children:[e.jsx("span",{className:"block text-xs text-secondary-500",children:"Equilíbrio"}),e.jsx("span",{className:"font-bold text-lg",children:m.criteria?.satisfactionBalance||"-"})]})]}),m.criteria?.peerEvaluations&&e.jsxs("div",{className:"pt-4 mt-2 border-t",children:[e.jsx("h4",{className:"text-sm font-bold mb-2",children:"Detalhes de Relacionamento Interpessoal"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:Object.entries(m.criteria.peerEvaluations).map(([s,x])=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-secondary-50 dark:bg-secondary-900 rounded text-xs",children:[e.jsx("span",{className:"truncate mr-2",title:s,children:s}),e.jsx("span",{className:"font-bold",children:x})]},s))})]})]}),(m.improvement||m.criteria?.positiveHighlight)&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 pt-4 border-t",children:[m.improvement&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-500 mb-1",children:"Pontos de Melhoria / Sugestões"}),e.jsx("p",{className:"text-sm",children:m.improvement})]}),m.criteria?.positiveHighlight&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-500 mb-1",children:"Destaque Positivo"}),e.jsx("p",{className:"text-sm",children:m.criteria.positiveHighlight})]})]})]})]})})]}):b==="ouvidoria"?e.jsxs(k,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Manifestações Recebidas"}),e.jsx(E,{children:"Visão tabular dos dados registrados no sistema."})]}),e.jsx(w,{children:e.jsx("div",{className:"rounded-md border border-secondary-200 dark:border-secondary-800 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-secondary-700 uppercase bg-secondary-50 dark:bg-secondary-900 dark:text-secondary-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Data"}),e.jsx("th",{className:"px-6 py-3",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3",children:"Identificação"}),e.jsx("th",{className:"px-6 py-3",children:"Texto"}),e.jsx("th",{className:"px-6 py-3",children:"Status"}),e.jsx("th",{className:"px-6 py-3",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-secondary-200 dark:divide-secondary-800",children:t.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-secondary-500",children:[e.jsx(ts,{className:"mx-auto h-8 w-8 mb-2 opacity-50"}),"Nenhum registro encontrado."]})}):t.map(s=>e.jsxs("tr",{className:"bg-white dark:bg-secondary-950 hover:bg-secondary-50 dark:hover:bg-secondary-900",children:[e.jsx("td",{className:"px-6 py-4 font-medium whitespace-nowrap",children:new Date(s.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold
                                                        ${s.type==="Denúncia"||s.type==="Reclamação"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:s.type})}),e.jsx("td",{className:"px-6 py-4",children:s.isAnonymous?e.jsx("span",{className:"text-secondary-500 italic",children:"Anônimo"}):e.jsx("span",{className:"font-medium",children:s.identification||"Não identificado"})}),e.jsx("td",{className:"px-6 py-4 truncate max-w-xs",title:s.text,children:s.text}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold
                                                        ${s.status==="Atendido"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.status||"Pendente"})}),e.jsxs("td",{className:"px-6 py-4 flex gap-2",children:[s.status!=="Atendido"&&e.jsx(h,{size:"icon",variant:"ghost",className:"h-8 w-8 text-green-600",onClick:()=>Es(s.id),title:"Marcar como Atendido",children:e.jsx(es,{className:"h-4 w-4"})}),e.jsx(h,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-600",onClick:()=>Ts(s.id),title:"Excluir",children:e.jsx(q,{className:"h-4 w-4"})})]})]},s.id))})]})})})]}):b==="tickets"?e.jsxs(k,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Chamados em Aberto"}),e.jsx(E,{children:"Gerenciamento de tickets de suporte."})]}),e.jsx(w,{children:e.jsx("div",{className:"rounded-md border border-secondary-200 dark:border-secondary-800 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-secondary-700 uppercase bg-secondary-50 dark:bg-secondary-900 dark:text-secondary-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Data"}),e.jsx("th",{className:"px-6 py-3",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3",children:"Solicitante"}),e.jsx("th",{className:"px-6 py-3",children:"Status"}),e.jsx("th",{className:"px-6 py-3",children:"Urgência"}),e.jsx("th",{className:"px-6 py-3",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-secondary-200 dark:divide-secondary-800",children:me.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-secondary-500",children:[e.jsx(ts,{className:"mx-auto h-8 w-8 mb-2 opacity-50"}),e.jsx("p",{children:"Nenhum ticket encontrado."})]})}):me.map(s=>e.jsxs("tr",{className:"bg-white dark:bg-secondary-950 hover:bg-secondary-50 dark:hover:bg-secondary-900",children:[e.jsx("td",{className:"px-6 py-4 font-medium whitespace-nowrap",children:new Date(s.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:s.category}),e.jsx("td",{className:"px-6 py-4",children:s.author||"Anônimo"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold
                                                        ${s.status==="Concluído"?"bg-green-100 text-green-700":s.status==="Em Atendimento"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`font-bold text-xs uppercase ${s.urgency==="Alta"?"text-red-500":s.urgency==="Média"?"text-orange-500":"text-green-500"}`,children:s.urgency})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>Ss(s),children:"Gerenciar"}),s.status==="Concluído"&&e.jsx(h,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:async()=>{confirm("Tem certeza que deseja excluir este ticket permanentemente?")&&await us(s.id)},title:"Excluir Ticket",children:e.jsx(q,{className:"h-4 w-4"})})]})]},s.id))})]})})})]}):null,e.jsx(ue,{isOpen:ws,onClose:()=>X(!1),title:"Gerenciar Ticket",children:e.jsxs("form",{onSubmit:Cs,className:"space-y-4",children:[I&&e.jsxs("div",{className:"p-4 bg-secondary-50 dark:bg-secondary-900 rounded-lg space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold",children:I.category}),e.jsx("span",{className:"text-xs text-secondary-500",children:new Date(I.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-300",children:I.description}),e.jsxs("p",{className:"text-xs text-secondary-400",children:["Aberto por: ",I.author||"Anônimo"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium dark:text-secondary-200",children:"Status"}),e.jsxs("select",{value:Je,onChange:s=>Xe(s.target.value),className:"w-full rounded-md border border-secondary-300 bg-white px-3 py-2 text-sm dark:bg-secondary-950 dark:border-secondary-700 dark:text-secondary-200 focus:outline-none focus:ring-2 focus:ring-primary-600",children:[e.jsx("option",{value:"Novo",children:"Novo"}),e.jsx("option",{value:"Em Atendimento",children:"Em Atendimento"}),e.jsx("option",{value:"Concluído",children:"Concluído"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium dark:text-secondary-200",children:"Resposta / Anotação"}),e.jsx("textarea",{value:Qe,onChange:s=>We(s.target.value),rows:4,className:"w-full rounded-md border border-secondary-300 bg-white px-3 py-2 text-sm resize-none dark:bg-secondary-950 dark:border-secondary-700 dark:text-secondary-200 focus:outline-none focus:ring-2 focus:ring-primary-600",placeholder:"Escreva uma resposta para o solicitante..."})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(h,{variant:"outline",type:"button",onClick:()=>X(!1),children:"Cancelar"}),e.jsx(h,{type:"submit",children:"Atualizar"})]})]})}),e.jsx(ue,{isOpen:!!ne,onClose:()=>G(null),title:"Editar Membro",children:e.jsxs("form",{onSubmit:As,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-secondary-200",children:"Nome"}),e.jsx(c,{value:_e,onChange:s=>Pe(s.target.value),placeholder:"Nome do membro"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-secondary-200",children:"Email"}),e.jsx(c,{value:Re,onChange:s=>Le(s.target.value),placeholder:"Email do membro"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-secondary-200",children:"Senha"}),e.jsx(c,{value:Ie,onChange:s=>$e(s.target.value),placeholder:"Nova senha"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(h,{type:"button",variant:"ghost",onClick:()=>G(null),children:"Cancelar"}),e.jsx(h,{type:"submit",children:"Salvar Alterações"})]})]})}),e.jsx(ue,{isOpen:!!N,onClose:()=>z(null),title:"Gerenciar Setor",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("form",{onSubmit:Ds,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-secondary-200",children:"Nome do Setor"}),e.jsx(c,{value:ze,onChange:s=>He(s.target.value),placeholder:"Ex: Prateleira 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-secondary-200",children:"Categoria"}),e.jsx(c,{value:Oe,onChange:s=>qe(s.target.value),placeholder:"Ex: Papelaria"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(h,{type:"submit",size:"sm",children:"Atualizar Detalhes"})})]}),e.jsxs("div",{className:"border-t border-secondary-200 dark:border-secondary-800 pt-4",children:[e.jsx("h4",{className:"font-medium mb-2 dark:text-white",children:"Inventário"}),e.jsxs("form",{onSubmit:_s,className:"space-y-3 mb-4 p-3 bg-secondary-50 dark:bg-secondary-900/50 rounded-lg border border-secondary-200 dark:border-secondary-800",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(c,{value:oe,onChange:s=>ie(s.target.value),placeholder:"Nome do item",className:"col-span-2"}),e.jsx(c,{value:Ue,onChange:s=>de(s.target.value),placeholder:"Cód (opcional)"}),e.jsx(c,{type:"number",min:"1",value:Fe,onChange:s=>le(parseInt(s.target.value)),placeholder:"Qtd"}),e.jsx("div",{className:"col-span-2",children:e.jsxs("select",{value:Ve,onChange:s=>ce(s.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 dark:bg-secondary-900 dark:text-white",children:[e.jsx("option",{value:"Disponível",className:"bg-white dark:bg-secondary-900 text-secondary-900 dark:text-white",children:"Disponível"}),e.jsx("option",{value:"Em Uso",className:"bg-white dark:bg-secondary-900 text-secondary-900 dark:text-white",children:"Em Uso"}),e.jsx("option",{value:"Emprestado",className:"bg-white dark:bg-secondary-900 text-secondary-900 dark:text-white",children:"Emprestado"}),e.jsx("option",{value:"Indisponível",className:"bg-white dark:bg-secondary-900 text-secondary-900 dark:text-white",children:"Indisponível"})]})})]}),e.jsxs(h,{type:"submit",size:"sm",className:"w-full",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"})," Adicionar Item"]})]}),e.jsx("div",{className:"max-h-[200px] overflow-y-auto space-y-2",children:N?.items.length===0?e.jsx("p",{className:"text-sm text-secondary-500 italic",children:"Nenhum item cadastrado."}):N?.items.map(s=>e.jsxs("div",{className:"flex justify-between items-center bg-secondary-50 dark:bg-secondary-900 p-2 rounded text-sm group",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.code&&e.jsx("span",{className:"text-xs text-secondary-500 bg-secondary-200 dark:bg-secondary-800 px-1 rounded",children:s.code})]}),e.jsxs("div",{className:"flex gap-2 text-xs text-secondary-500 mt-0.5",children:[e.jsxs("span",{children:["Qtd: ",s.quantity]}),e.jsx("span",{className:`
                                                    ${s.status==="Disponível"?"text-green-600":s.status==="Indisponível"?"text-red-600":"text-yellow-600"}
                                                `,children:s.status})]})]}),e.jsx("button",{onClick:()=>Ps(s.id),className:"text-red-500 hover:text-red-700 p-1 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Us,{className:"h-3 w-3"})})]},s.id))})]})]})})]})}export{Ua as default};
